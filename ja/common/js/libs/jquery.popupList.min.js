(function(b){var a=0;b.fn.popupList=function(f){var w=f.list;var g=f.cascade||false;var q=f.colwidth;var o=f.id;var y=this;var z=b.data(b(y).get(0),"popupList",{});z.id=a++;var e=function(){var c=b(y).offset();c.top+=b(y).get(0).offsetHeight+2;b(l).css({top:c.top,left:c.left})};var p=function(m){var i=m.target;var c=b("div.popup-list")[z.id];while(true){if(i==c){return true}else{if(i==document){b(c).hide();return false}else{i=b(i).parent()[0]}}}};var l=b("<div "+((o!=undefined)?'id="'+o+'" ':"")+'class="popup-list"></div>').css({position:"absolute",display:"none"});var v=b("<table></table>").css({"border-collapse":"separate","border-spacing":"2px","empty-cells":"hide"});var s=0;for(var u=0;u<w.length;u++){if(s<w[u].length){s=w[u].length}}var t=(g)?s:w.length;var k=(g)?w.length:s;for(var n=0;n<t;n++){var d=b("<tr></tr>");for(var x=0;x<k;x++){var A=(g)?w[x][n]:w[n][x];var h=b("<td></td>");if(q!=undefined){b(h).css("width",q)}if(A==undefined){b(h).html("&nbsp;")}else{b(h).addClass("popup-item").text(A);b(h).click(function(){b(y).val(b(this).text());b(document).unbind("mousedown",p);b(l).hide()});b(h).hover(function(){b(this).addClass("popup-item-hover")},function(){b(this).removeClass("popup-item-hover")})}b(d).append(h)}b(v).append(d)}b(l).append(v);b("body").append(l);var j=function(){e();b(l).show();b(document).bind("mousedown",p)};b(y).click(j)}})(jQuery);